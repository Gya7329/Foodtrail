{"ast":null,"code":"var _jsxFileName = \"/home/gdansari01/MERN-BUS-APP/frontend/src/components/PaymentTab/PaymentTab.js\";\nimport React from \"react\";\nimport Card from \"react-credit-cards\";\nimport './PaymentTab.css';\nimport jwt_decode from 'jwt-decode';\nimport { formatCreditCardNumber, formatCVC, formatExpirationDate, formatFormData } from \"./utils\";\nimport \"react-credit-cards/es/styles-compiled.css\";\nexport default class App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      number: \"\",\n      name: \"\",\n      expiry: \"\",\n      cvc: \"\",\n      issuer: \"\",\n      focused: \"\",\n      formData: \"\",\n      token: \"\"\n    };\n\n    this.handleCallback = ({\n      issuer\n    }, isValid) => {\n      if (isValid) {\n        this.setState({\n          issuer\n        });\n      }\n    };\n\n    this.handleInputFocus = ({\n      target\n    }) => {\n      this.setState({\n        focused: target.name\n      });\n    };\n\n    this.handleInputChange = ({\n      target\n    }) => {\n      if (target.name === \"number\") {\n        target.value = formatCreditCardNumber(target.value);\n      } else if (target.name === \"expiry\") {\n        target.value = formatExpirationDate(target.value);\n      } else if (target.name === \"cvc\") {\n        target.value = formatCVC(target.value);\n      }\n\n      this.setState({\n        [target.name]: target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const {\n        issuer\n      } = this.state;\n      const formData = [...e.target.elements].filter(d => d.name).reduce((acc, d) => {\n        acc[d.name] = d.value;\n        return acc;\n      }, {});\n      this.setState({\n        formData\n      });\n      this.form.reset();\n    };\n\n    this.moveToTicketPage = e => {\n      e.preventDefault();\n      localStorage.setItem(\"paymentData\", JSON.stringify(this.state.token));\n      window.location.href = \"/getTicket\";\n    };\n\n    this.renderNamesOfPassenger = () => {\n      let passArray = localStorage.getItem('nameData');\n\n      if (passArray) {\n        let nameArray = JSON.parse(passArray);\n        return nameArray.map((name, idx) => {\n          return /*#__PURE__*/React.createElement(\"p\", {\n            key: idx,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 21\n            }\n          }, name);\n        });\n      }\n    };\n\n    this.renderSeatNumbers = () => {\n      let seatArray = localStorage.getItem('reservedSeats');\n\n      if (seatArray) {\n        let seaArr = JSON.parse(seatArray);\n        return seaArr.map((seat, idx) => {\n          return /*#__PURE__*/React.createElement(\"p\", {\n            key: idx,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 21\n            }\n          }, seat);\n        });\n      }\n    };\n\n    this.getSumTotal = () => {\n      let count = 0;\n      let tax = 150;\n      let seatArray = localStorage.getItem('reservedSeats');\n\n      if (seatArray) {\n        let seaArr = JSON.parse(seatArray);\n\n        for (let i = 0; i < seaArr.length; i++) {\n          count++;\n        }\n\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"hr\", {\n          className: \"hr3\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 21\n          }\n        }), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 21\n          }\n        }, 1000 * count), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 21\n          }\n        }, \"+\", tax), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 21\n          }\n        }, 1000 * count + tax));\n      }\n    };\n  }\n\n  componentDidMount() {\n    const tok = sessionStorage.getItem(\"authToken\");\n    const decoded = jwt_decode(tok);\n    this.setState({\n      token: decoded.user\n    });\n  }\n\n  render() {\n    const {\n      name,\n      number,\n      expiry,\n      cvc,\n      focused,\n      issuer,\n      formData,\n      token\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"paym\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      key: \"Payment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App-payment cl-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"pPayment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 29\n      }\n    }, \"Enter Credit card details\"), /*#__PURE__*/React.createElement(Card, {\n      number: number,\n      name: name,\n      expiry: expiry,\n      cvc: cvc,\n      focused: focused,\n      callback: this.handleCallback,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"credit-form\",\n      ref: c => this.form = c,\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"tel\",\n      name: \"number\",\n      className: \"frm-ctrl\",\n      placeholder: \"Card Number\",\n      pattern: \"[\\\\d| ]{16,22}\",\n      required: true,\n      onChange: this.handleInputChange,\n      onFocus: this.handleInputFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"name\",\n      className: \"frm-ctrl\",\n      placeholder: \"Name\",\n      required: true,\n      onChange: this.handleInputChange,\n      onFocus: this.handleInputFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"tel\",\n      name: \"expiry\",\n      className: \"frm-ctrl\",\n      placeholder: \"Valid Thru\",\n      pattern: \"\\\\d\\\\d/\\\\d\\\\d\",\n      required: true,\n      onChange: this.handleInputChange,\n      onFocus: this.handleInputFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"tel\",\n      name: \"cvc\",\n      className: \"frm-ctrl cvc\",\n      placeholder: \"CVC\",\n      pattern: \"\\\\d{3,4}\",\n      required: true,\n      onChange: this.handleInputChange,\n      onFocus: this.handleInputFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"hidden\",\n      name: \"issuer\",\n      value: issuer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: e => this.moveToTicketPage(e),\n      className: \"btn btn-light btCustom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 37\n      }\n    }, \"PAY\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"columnTwo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 25\n      }\n    }, \"Unique Travels\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 29\n      }\n    }, \"BOOKING DETAILS\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 pt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hdng\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 37\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"hr\", {\n      className: \"hr3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hdng\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 37\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hdng\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 37\n      }\n    }, \"From\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hdng\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 37\n      }\n    }, \"To\"), /*#__PURE__*/React.createElement(\"hr\", {\n      className: \"hr3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hdng\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 37\n      }\n    }, \"Passengers\"), this.renderNamesOfPassenger(), /*#__PURE__*/React.createElement(\"hr\", {\n      className: \"hr3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hdng\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 37\n      }\n    }, \"Ticket price\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hdng\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 37\n      }\n    }, \"Tax\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hdng\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 37\n      }\n    }, \"Toal Sum\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"usrName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 37\n      }\n    }, token.name), /*#__PURE__*/React.createElement(\"hr\", {\n      className: \"hr3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"usrName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 37\n      }\n    }, localStorage.getItem(\"date\")), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"usrName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 37\n      }\n    }, localStorage.getItem(\"start\")), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"usrName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 37\n      }\n    }, localStorage.getItem(\"destination\")), /*#__PURE__*/React.createElement(\"hr\", {\n      className: \"hr3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hdng\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 37\n      }\n    }, \"Seat No\"), this.renderSeatNumbers(), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 37\n      }\n    }, this.getSumTotal())))))));\n  }\n\n}","map":{"version":3,"sources":["/home/gdansari01/MERN-BUS-APP/frontend/src/components/PaymentTab/PaymentTab.js"],"names":["React","Card","jwt_decode","formatCreditCardNumber","formatCVC","formatExpirationDate","formatFormData","App","Component","state","number","name","expiry","cvc","issuer","focused","formData","token","handleCallback","isValid","setState","handleInputFocus","target","handleInputChange","value","handleSubmit","e","preventDefault","elements","filter","d","reduce","acc","form","reset","moveToTicketPage","localStorage","setItem","JSON","stringify","window","location","href","renderNamesOfPassenger","passArray","getItem","nameArray","parse","map","idx","renderSeatNumbers","seatArray","seaArr","seat","getSumTotal","count","tax","i","length","componentDidMount","tok","sessionStorage","decoded","user","render","c"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Card from \"react-credit-cards\";\nimport './PaymentTab.css'\nimport jwt_decode from 'jwt-decode'\n\nimport {\n    formatCreditCardNumber,\n    formatCVC,\n    formatExpirationDate,\n    formatFormData\n} from \"./utils\";\nimport \"react-credit-cards/es/styles-compiled.css\";\n\nexport default class App extends React.Component {\n\n    state = {\n        number: \"\",\n        name: \"\",\n        expiry: \"\",\n        cvc: \"\",\n        issuer: \"\",\n        focused: \"\",\n        formData: \"\",\n        token: \"\",\n    }\n\n    componentDidMount() {\n        const tok = sessionStorage.getItem(\"authToken\")\n        const decoded = jwt_decode(tok)\n        this.setState({ token: decoded.user })\n    }\n\n    handleCallback = ({ issuer }, isValid) => {\n        if (isValid) {\n            this.setState({ issuer });\n        }\n    };\n\n    handleInputFocus = ({ target }) => {\n        this.setState({\n            focused: target.name\n        });\n    };\n\n    handleInputChange = ({ target }) => {\n        if (target.name === \"number\") {\n            target.value = formatCreditCardNumber(target.value);\n        } else if (target.name === \"expiry\") {\n            target.value = formatExpirationDate(target.value);\n        } else if (target.name === \"cvc\") {\n            target.value = formatCVC(target.value);\n        }\n\n        this.setState({ [target.name]: target.value });\n    };\n\n    handleSubmit = e => {\n        e.preventDefault();\n        const { issuer } = this.state;\n        const formData = [...e.target.elements]\n            .filter(d => d.name)\n            .reduce((acc, d) => {\n                acc[d.name] = d.value;\n                return acc;\n            }, {});\n\n        this.setState({ formData });\n        this.form.reset();\n    };\n\n    moveToTicketPage = (e) => {\n        e.preventDefault()\n        localStorage.setItem(\"paymentData\", JSON.stringify(this.state.token))\n        window.location.href = \"/getTicket\"\n    }\n\n    renderNamesOfPassenger = () => {\n        let passArray = localStorage.getItem('nameData')\n        if (passArray) {\n            let nameArray = JSON.parse(passArray)\n            return nameArray.map((name, idx) => {\n                return (\n                    <p key={idx}>{name}</p>\n                )\n            })\n        }\n    }\n\n    renderSeatNumbers = () => {\n        let seatArray = localStorage.getItem('reservedSeats')\n        if (seatArray) {\n            let seaArr = JSON.parse(seatArray)\n            return seaArr.map((seat, idx) => {\n                return (\n                    <p key={idx}>{seat}</p>\n                )\n            })\n        }\n    }\n\n    getSumTotal = () => {\n        let count = 0\n        let tax = 150\n        let seatArray = localStorage.getItem('reservedSeats')\n        if (seatArray) {\n            let seaArr = JSON.parse(seatArray)\n            for (let i = 0; i < seaArr.length; i++) {\n                count++\n            }\n            return (\n                <div>\n                    <hr className=\"hr3\" />\n                    <p>{1000 * count}</p>\n                    <p>+{tax}</p>\n                    <p>{(1000 * count) + tax}</p>\n                </div>\n            )\n        }\n    }\n\n    render() {\n        const { name, number, expiry, cvc, focused, issuer, formData, token } = this.state;\n\n        return (\n\n            <div className=\"paym\">\n                <div className=\"row\">\n\n\n                    <div key=\"Payment\">\n                        <div className=\"App-payment cl-1\">\n                            <p className=\"pPayment\">Enter Credit card details</p>\n                            <Card\n                                number={number}\n                                name={name}\n                                expiry={expiry}\n                                cvc={cvc}\n                                focused={focused}\n                                callback={this.handleCallback}\n                            />\n                            <form className=\"credit-form\" ref={c => (this.form = c)} onSubmit={this.handleSubmit}>\n                                <div className=\"form-group\">\n                                    <input\n                                        type=\"tel\"\n                                        name=\"number\"\n                                        className=\"frm-ctrl\"\n                                        placeholder=\"Card Number\"\n                                        pattern=\"[\\d| ]{16,22}\"\n                                        required\n                                        onChange={this.handleInputChange}\n                                        onFocus={this.handleInputFocus}\n                                    />\n                                </div>\n                                <div className=\"form-group\">\n                                    <input\n                                        type=\"text\"\n                                        name=\"name\"\n                                        className=\"frm-ctrl\"\n                                        placeholder=\"Name\"\n                                        required\n                                        onChange={this.handleInputChange}\n                                        onFocus={this.handleInputFocus}\n                                    />\n                                </div>\n                                <div className=\"form-group\">\n                                    <input\n                                        type=\"tel\"\n                                        name=\"expiry\"\n                                        className=\"frm-ctrl\"\n                                        placeholder=\"Valid Thru\"\n                                        pattern=\"\\d\\d/\\d\\d\"\n                                        required\n                                        onChange={this.handleInputChange}\n                                        onFocus={this.handleInputFocus}\n                                    />\n                                </div>\n                                <div className=\"form-group\">\n                                    <input\n                                        type=\"tel\"\n                                        name=\"cvc\"\n                                        className=\"frm-ctrl cvc\"\n                                        placeholder=\"CVC\"\n                                        pattern=\"\\d{3,4}\"\n                                        required\n                                        onChange={this.handleInputChange}\n                                        onFocus={this.handleInputFocus}\n                                    />\n                                </div>\n                                <input type=\"hidden\" name=\"issuer\" value={issuer} />\n                                <div className=\"\">\n                                    <button onClick={e => this.moveToTicketPage(e)} className=\"btn btn-light btCustom\">PAY</button>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n\n\n\n                    <div className=\"columnTwo\">\n                        <h3>Unique Travels</h3>\n                        <div>\n                            <p>BOOKING DETAILS</p>\n                            <div className=\"row\">\n                                <div className=\"col-6 pt\">\n                                    <p className=\"hdng\">Username</p>\n                                    <hr className=\"hr3\" />\n                                    <p className=\"hdng\">Date</p>\n                                    <p className=\"hdng\">From</p>\n                                    <p className=\"hdng\">To</p>\n                                    <hr className=\"hr3\" />\n                                    <p className=\"hdng\">Passengers</p>\n                                    {this.renderNamesOfPassenger()}\n                                    <hr className=\"hr3\" />\n                                    <p className=\"hdng\">Ticket price</p>\n                                    <p className=\"hdng\">Tax</p>\n                                    <p className=\"hdng\">Toal Sum</p>\n\n                                </div>\n                                <div className=\"col-6\">\n                                    <p className=\"usrName\">{token.name}</p>\n                                    <hr className=\"hr3\" />\n                                    <p className=\"usrName\">{localStorage.getItem(\"date\")}</p>\n                                    <p className=\"usrName\">{localStorage.getItem(\"start\")}</p>\n                                    <p className=\"usrName\">{localStorage.getItem(\"destination\")}</p>\n                                    <hr className=\"hr3\" />\n                                    <p className=\"hdng\">Seat No</p>\n                                    {this.renderSeatNumbers()}\n                                    <p>{this.getSumTotal()}</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}